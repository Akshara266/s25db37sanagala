extends layout

block content
  h2 Search Results for 
  br
  a.btn.btn-success(href="/Gadgets/create") Create Gadget  
  br

  - let items = results
  div(class="container-fluid")
    div(class="row m-1")
      each item in items
        - let destination = `dispatch("/Gadgets/update?id=${item._id}")`
        div(class="row-sm-2 m-1") Item #{item.gadget_name}(#{item.brand}) is #{item.battery_life}
        button.btn(class="btn-primary ml-1", onclick=destination) Update
        div.col-sm-3.bg-light.text-dark.p-3.m-2.rounded.shadow.text-center(
          style="border: 1px solid #ccc; cursor: pointer;"
        )
          h5 #{item.gadget_name}
          p Gadget Name: #{item.gadget_name}
          p Brand: #{item.brand}
          p Battery Life: #{item.battery_life} hrs
          div.mt-2
            button.btn.btn-warning.ml-1(onclick=`updateGadget(${index})`) 🛠️ Update
            button.btn.btn-primary.ml-1(onclick=`detailGadget(${index})`) 📄 Detail
            button.btn.btn-danger.ml-1(onclick=`deleteGadget(${index})`) ❌ Delete
          br
          br

  script.
    function updateGadget(index) {
      alert("Update Gadget " + index);
      // TODO: redirect to update page
    }
    function detailGadget(index) {
      alert("View details for Gadget " + index);
      // TODO: redirect to detail page
    }
    function deleteGadget(index) {
      alert("Delete Gadget " + index);
      // TODO: send DELETE request
    }

  script.
    function dispatch(path){
      window.location.href=path
    }

